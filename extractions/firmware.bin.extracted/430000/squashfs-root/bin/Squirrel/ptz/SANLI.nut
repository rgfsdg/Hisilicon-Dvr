class SanLi extends PtzBase{
	// 协议的显示名称, 最好与文件名直接对应，不能超过16字符
	Name = "SANLI"
		
	// 指明是云台协议还是矩阵协议，使用"PTZ", "MATRIX"表示
	Type = "PTZ"
	
	// 以ms为单位
	Internal = 200		
	
	// 一下地址范围如无对应的地址范围，都设成0xFF
	
	// 云台地址范围
	CamAddrRange 		= [0x00, 0xFF]
	
	// 监视地址范围
	MonAddrRange		= [0x00, 0xFF]
	
	// 预置点范围
	PresetRange 		= [0x01, 0x80]
	
	// 自动巡航线路范围
	TourRange			= [0x00, 0x07]
	
	// 轨迹线路范围
	PatternRange		= [0x00, 0x04]
	
	// 垂直速度范围
	TileSpeedRange 		= [0x01, 0x0F]
	
	// 水平速度范围
	PanSpeedRange 		= [0x01, 0x0F]
	
	// 辅助范围
	AuxRange 			= [0x01, 0x34]
	
	AddrPos 			= 0
	PresetPos 		= 3
	TileSpeedPos 	= 3
	PanSpeedPos 	= 3
	AuxPos 				= 2
	
	cmd = []
	
	StartOpr = {
		TileUp 		= [0x00, 0x00, 0x50, 0x00, 0x00],
		TileDown 	= [0x00, 0x00, 0x51, 0x00, 0x00],
		PanLeft 	= [0x00, 0x00, 0x52, 0x00, 0x00],
		PanRight 	= [0x00, 0x00, 0x53, 0x00, 0x00],
		
		ZoomWide 	= [0xA5, 0x00, 0x0c, 0x00],
		ZoomTele 	= [0xA5, 0x00, 0x0d, 0x00],
		FocusNear	= [0xA5, 0x00, 0x0A, 0x00],
		FocusFar 	= [0xA5, 0x00, 0x0B, 0x00],
		IrisSmall	= [0xA5, 0x00, 0x09, 0x00],
		IrisLarge	= [0xA5, 0x00, 0x08, 0x00],	
		
		LightOn		= [0x00, 0x00, 0x1c, 0x00],
		LightOff  = [0x00, 0x01, 0x1d, 0x00],
		
		SetPreset 	= [0x00, 0x00, 0x58, 0x00, 0x00],
		ClearPreset	= [0x00, 0x00, 0x5a, 0x00, 0x00],
		GoToPreset 	= [0x00, 0x00, 0x59, 0x00, 0x00],
		
		AutoPanOn	  = [0x00, 0x00, 0x34, 0x00],
		AutoPanOff	= [0x00, 0x00, 0x31, 0x00],
		

		SetPatternStart = [0x00, 0x00, 0x64, 0x00, 0x00],
		SetPatternStop 	= [0x00, 0x00, 0x21, 0x00, 0x00, 0x00, 0x22,0x00],
		StartPattern 		= [0x00, 0x00, 0x60, 0x00, 0x00],
    StopPattern     = [0x00, 0x00, 0x62, 0x00, 0x00],
    ClearPattern 		= [0x00, 0x00, 0x63, 0x00, 0x00],
    
    AuxOn 	= [0x00, 0x00, 0x00, 0x00],
		AuxOff 	= [0x00, 0x00, 0x00, 0x00]
	}
	
	StopOpr = {
		TileUp 		= [0x00, 0x00, 0x01, 0x00],
		TileDown 	= [0x00, 0x00, 0x01, 0x00],
		PanLeft 	= [0x00, 0x00, 0x02, 0x00],
		PanRight 	= [0x00, 0x00, 0x02, 0x00],
	
		ZoomWide 	= [0x00, 0x00, 0x05, 0x00],
		ZoomTele 	= [0x00, 0x00, 0x05, 0x00],
		FocusNear = [0x00, 0x00, 0x04, 0x00],
		FocusFar 	= [0x00, 0x00, 0x04, 0x00],
		IrisSmall = [0x00, 0x00, 0x03, 0x00],
		IrisLarge = [0x00, 0x00, 0x03, 0x00]
	}
	
	function CheckSum()
	{
		if (cmd.len() == 5)
		{
			cmd[4] = (0xFFFF - (cmd[0] + cmd[1] + cmd[2] + cmd[3])) % 128;
		}
		else if (cmd.len() == 4)
		{	
			cmd[3] = (0xFFFF - (cmd[0] + cmd[1] + cmd[2])) % 128;
		}
		else
		{
			cmd[3] = (0xFFFF - (cmd[0] + cmd[1] + cmd[2])) % 128;
			cmd[7] = (0xFFFF - (cmd[4] + cmd[5] + cmd[6])) % 128;
		}
	}
	
	function setCamAddr(addr)
	{
		if (cmd.len() == 4 || cmd.len() == 5)
		{
			local tmp = addr % 256;
			cmd[0] = tmp / 64 + 0xc0;
			cmd[1] = tmp % 64 + 0x80;
		}
		else
		{
			local tmp = addr % 256;
			cmd[0] = (tmp / 64) + 0xc0;
			cmd[4] = (tmp / 64) + 0xc0;
			cmd[1] = (tmp % 64) + 0x80;
			cmd[5] = (tmp % 64) + 0x80;
		}
	}
	
	function setSpeed(ver, hor)
  {
  	if (cmd.len() == 5)
  	{
	  	if (ver != 0x00)
			{
				cmd[TileSpeedPos] = ver;
			}
			if (hor != 0x00)
			{
				cmd[PanSpeedPos] = hor;
			}
		}
  }
}

local cSanLi = SanLi();

return cSanLi;