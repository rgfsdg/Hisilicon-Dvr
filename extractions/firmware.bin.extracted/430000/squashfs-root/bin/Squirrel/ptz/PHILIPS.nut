class Philips extends PtzBase{
	// 协议的显示名称, 最好与文件名直接对应，不能超过16字符
	Name = "PHILIPS"
		
	// 指明是云台协议还是矩阵协议，使用"PTZ", "MATRIX"表示
	Type = "PTZ"
	
	// 以ms为单位
	Internal = 200		
	
	// 一下地址范围如无对应的地址范围，都设成0xFF
	
	// 云台地址范围
	CamAddrRange 		= [0x00, 16384]
	
	// 监视地址范围
	MonAddrRange		= [0x00, 0xFF]
	
	// 预置点范围
	PresetRange 		= [0x00, 0xFF]
	
	// 自动巡航线路范围
	TourRange			= [0xFF, 0xFF]
	
	// 轨迹线路范围
	PatternRange		= [0xFF, 0xFF]
	
	// 垂直速度范围
	TileSpeedRange 		= [0x01, 0x0F]
	
	// 水平速度范围
	PanSpeedRange 		= [0x01, 0x0F]
	
	// 辅助范围
	AuxRange 			= [0x01, 0x08]
	
	AddrPos 			= 1
	PresetPos 		= 4
	TileSpeedPos 	= 4
	PanSpeedPos 	= 5
	AuxPos 				= 4
	
	cmd = []
	
	StartOpr = {
		TileUp 		= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x08, 0x01],
		TileDown 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x04, 0x01],
		PanLeft 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x02, 0x01],
		PanRight 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x01, 0x01],
		LeftUp 		= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x0A, 0x01],
		LeftDown 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x06, 0x01],
		RightUp		= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x09, 0x01],
		RightDown = [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x05, 0x01],
		
		ZoomWide 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x20, 0x01],
		ZoomTele 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x10, 0x01],
		FocusNear	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x40, 0x01],
		FocusFar 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x01, 0x00, 0x01],
		IrisSmall	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x02, 0x00, 0x01],
		IrisLarge	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x04, 0x00, 0x01],	
		
		SetPreset 	= [0x86, 0x00, 0x00, 0x07, 0x04, 0x00, 0x00],
		GoToPreset 	= [0x86, 0x00, 0x00, 0x07, 0x05, 0x00, 0x00],
		
		AutoPanOn	  = [0x86, 0x00, 0x00, 0x02, 0x00, 0x10, 0x00],
		AutoPanOff	= [0x86, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00],
    AuxOn 	= [0x86, 0x00, 0x00, 0x07, 0x01, 0x00, 0x00],
		AuxOff 	= [0x86, 0x00, 0x00, 0x07, 0x02, 0x00, 0x00]
	}
	
	StopOpr = {
		TileUp 		= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x08, 0x00],
		TileDown 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x04, 0x00],
		PanLeft 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x02, 0x00],
		PanRight 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x01, 0x00],
		LeftUp 		= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x0A, 0x00],
		LeftDown 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x06, 0x00],
		RightUp		= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x09, 0x00],
		RightDown = [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x05, 0x00],
		ZoomWide 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x20, 0x00],
		ZoomTele 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x10, 0x00],
		FocusNear = [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00],
		FocusFar 	= [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00],
		IrisSmall = [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00],
		IrisLarge = [0x87, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00]
	}
	
	function CheckSum()
	{
		if (cmd[0] == 0x87)
		{
			cmd[7] = (cmd[0] + cmd[1] + cmd[2] + cmd[3] + cmd[4] + cmd[5] + cmd[6]) & 0x7F;
		}
		else if (cmd[0] == 0x86)
		{
			cmd[6] =(cmd[0] + cmd[1] + cmd[2] + cmd[3] + cmd[4] + cmd[5]) & 0x7F;
		}
	}
	
	function setCamAddr(addr)
	{
		cmd[AddrPos] = (addr >> 7) & 0x7F;
		cmd[AddrPos + 1] = addr & 0x7F;
	}
	
	function setSpeed(ver, hor)
  {
	  if (cmd[7] == 0x01)
		{
			if (ver != 0x00)
			{
				cmd[TileSpeedPos] = cmd[TileSpeedPos] | ver;
			}
			if (hor != 0x00)
			{
				cmd[PanSpeedPos] = cmd[PanSpeedPos] | (hor << 3);
			}
		}
  }
  
  function setZoom(multiple)
  {
  	local newspeed;
		if ((cmd[6] == 0x20 || cmd[6] == 0x10) && cmd[7] == 0x01)
		{
			if (multiple != 1)
			{
				newspeed = (multiple - 1) << 4;
				cmd[4] = cmd[4] | newspeed;
			}
			else
			{
				newspeed = multiple << 4;
				cmd[4] = cmd[4] | newspeed;
			}
		}
  }
  
  function setPreset(preset)
	{
		local high_3 = preset >> 7;
		high_3 = high_3 << 4;
		
		cmd[PresetPos + 1] = preset & 0x7F;
		cmd[PresetPos] = cmd[PresetPos] | high_3;
	}
	
	function setAux(num)
	{
		local high_3 = num >> 7;
		high_3 = high_3 << 4;
		
		cmd[AuxPos + 1] = num & 0x7F;
		cmd[AuxPos] = cmd[AuxPos] | high_3;
	}
}

local cPhilips = Philips();

return cPhilips;